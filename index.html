<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAK.TF | Elite Digital Goods</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&family=Space+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff0f0f;
            --primary-glow: rgba(255, 15, 15, 0.6);
            --bg: #030303;
            --surface: #0a0a0a;
            --card: #0d0d0d;
            --border: #1a1a1a;
            --text: #ffffff;
            --text-dim: #888;
            --transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; }
        body { background: var(--bg); color: var(--text); overflow: hidden; height: 100vh; -webkit-tap-highlight-color: transparent; }

        /* --- Custom Scrollbar --- */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        /* --- Dynamic Background --- */
        #bg-canvas { position: fixed; inset: 0; z-index: -1; opacity: 0.6; }

        /* --- Floating UI Elements --- */
        .vouch-btn {
            position: fixed; left: 20px; bottom: 20px; z-index: 500;
            background: rgba(13,13,13,0.8); border: 1px solid var(--border); padding: 12px 18px;
            border-radius: 50px; display: flex; align-items: center; gap: 10px;
            text-decoration: none; color: white; transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        .vouch-btn:hover { border-color: var(--primary); transform: translateY(-5px); box-shadow: 0 0 20px var(--primary-glow); }

        /* --- Toast Notifications --- */
        #notification-container { position: fixed; top: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
        .toast { 
            background: #111; border-left: 4px solid var(--primary); color: white; 
            padding: 15px 25px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transform: translateX(120%); transition: var(--transition); display: flex; align-items: center; gap: 12px;
        }
        .toast.show { transform: translateX(0); }

        /* --- Navigation --- */
        header { 
            position: fixed; top: 0; width: 100%; padding: 15px 5%; 
            display: flex; justify-content: space-between; align-items: center; z-index: 1000;
            background: rgba(3,3,3,0.85); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border);
        }
        .logo { height: 35px; cursor: pointer; }
        .nav-tabs { display: flex; gap: 5px; background: #000; padding: 4px; border-radius: 50px; border: 1px solid var(--border); }
        .nav-tabs button { background: none; border: none; color: var(--text-dim); padding: 8px 18px; border-radius: 40px; cursor: pointer; transition: 0.3s; font-size: 0.9rem; font-weight: 600; }
        .nav-tabs button.active { background: var(--primary); color: white; box-shadow: 0 0 15px var(--primary-glow); }

        @media (max-width: 768px) {
            header { padding: 15px 20px; }
            .nav-tabs { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; justify-content: space-around; background: rgba(0,0,0,0.9); }
            .vouch-btn { bottom: 85px; left: 15px; }
        }

        /* --- Page Systems --- */
        .page { position: fixed; inset: 0; padding: 100px 5% 50px; opacity: 0; transform: scale(0.98); pointer-events: none; transition: var(--transition); overflow-y: auto; }
        .page.active { opacity: 1; transform: scale(1); pointer-events: all; }

        /* --- Cards & Grid --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .item-card { 
            background: var(--card); border: 1px solid var(--border); padding: 25px; border-radius: 20px;
            transition: 0.3s; cursor: pointer;
        }
        .item-card:hover { border-color: var(--primary); transform: translateY(-5px); background: #111; }
        .price-tag { font-size: 1.5rem; font-weight: 900; color: var(--primary); }

        /* --- Quick View Modal --- */
        .overlay { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; 
            display: none; justify-content: center; align-items: center; backdrop-filter: blur(10px);
        }
        .view-panel { 
            background: var(--card); border: 1px solid var(--border); width: 90%; max-width: 500px;
            padding: 40px; border-radius: 30px; position: relative; animation: slideIn 0.4s ease;
        }
        @keyframes slideIn { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .qty-controls { display: flex; align-items: center; gap: 20px; margin: 25px 0; background: #000; width: fit-content; padding: 10px 20px; border-radius: 12px; border: 1px solid var(--border); }
        .qty-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }

        /* --- Crypto Step --- */
        .crypto-box { background: #111; padding: 20px; border-radius: 15px; border: 1px dashed var(--primary); margin: 20px 0; text-align: center; }
        .address-text { font-family: 'Space Mono'; font-size: 0.8rem; word-break: break-all; color: var(--primary); }

        .action-btn { background: var(--primary); color: white; border: none; padding: 18px; border-radius: 12px; font-weight: 900; width: 100%; cursor: pointer; transition: 0.3s; }
        .action-btn:hover { box-shadow: 0 0 25px var(--primary-glow); }
        .action-btn:disabled { background: #333; cursor: not-allowed; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div id="notification-container"></div>

    <a href="https://t.me/rakTFv" target="_blank" class="vouch-btn">
        <i class="fab fa-telegram" style="color:#0088cc"></i>
        <span style="font-weight: bold; font-size: 0.8rem; letter-spacing: 1px;">VOUCHES</span>
    </a>

    <header>
        <img src="https://i.ibb.co/KzhVm7vX/raklogo.png" class="logo" onclick="navigateTo('home')">
        <nav class="nav-tabs">
            <button class="active" onclick="navigateTo('home')">Home</button>
            <button onclick="navigateTo('logs')">Logs</button>
            <button onclick="navigateTo('food')">Food</button>
        </nav>
        <div style="display:flex; gap:20px; align-items:center;">
            <div onclick="navigateTo('cart')" style="cursor:pointer; position:relative;">
                <i class="fas fa-shopping-bag" style="font-size:1.3rem;"></i>
                <span id="cart-dot" style="position:absolute; top:-5px; right:-5px; width:10px; height:10px; background:var(--primary); border-radius:50%; display:none;"></span>
            </div>
            <div onclick="navigateTo('profile')" style="cursor:pointer;"><i class="fas fa-user-astronaut" style="font-size:1.3rem;"></i></div>
        </div>
    </header>

    <section id="page-home" class="page">
        <div style="background: linear-gradient(45deg, #150505, #000); padding: 50px; border-radius: 30px; border: 1px solid var(--border); margin-bottom: 30px; text-align: center;">
            <h1 style="font-family: 'Space Mono'; font-size: clamp(1.5rem, 5vw, 2.5rem); color: var(--primary);">OTP BOT COMING SOON</h1>
        </div>

        <div class="grid" id="product-grid">
            </div>
    </section>

    <section id="page-logs" class="page">
        <div style="height: 50vh; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 1px dashed var(--border); border-radius: 40px;">
            <h1 style="font-size: 3rem; opacity: 0.2;">COMING BACK SOON!</h1>
        </div>
    </section>

    <section id="page-food" class="page">
        <div style="height: 50vh; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 1px dashed var(--border); border-radius: 40px;">
            <h1 style="font-size: 3rem; color: #44ff44; opacity: 0.2;">B4U COMING SOON!</h1>
        </div>
    </section>

    <section id="page-cart" class="page">
        <h1>CHECKOUT</h1>
        <div id="cart-container" style="display: grid; grid-template-columns: 1fr 350px; gap: 40px; margin-top: 30px;">
            <div id="cart-items"></div>
            <div id="cart-summary" style="background:var(--card); padding:30px; border-radius:20px; height:fit-content; border:1px solid var(--border);">
                <h3 style="margin-bottom:20px;">Order Summary</h3>
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <span>Subtotal:</span><span id="total-usd">$0.00</span>
                </div>
                <hr style="border:0; border-top:1px solid #222; margin:15px 0;">
                <button class="action-btn" onclick="openPaymentPanel()">CHOOSE PAYMENT</button>
            </div>
        </div>
    </section>

    <section id="page-profile" class="page">
        <div style="max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
            <div style="background:var(--card); padding:30px; border-radius:25px; border:1px solid var(--border);">
                <h2>Settings</h2>
                <div id="admin-gate-ui">
                    <p style="color:var(--text-dim); margin: 15px 0;">Verification required.</p>
                    <input type="password" id="p-key" placeholder="Enter Approval Key">
                    <button class="action-btn" onclick="verifyProfile()">Verify</button>
                </div>
                <div id="settings-ui" style="display:none;">
                    <p style="color:#ff8800; font-size:0.8rem; margin-bottom:15px;">Contact @torements with SS proof.</p>
                    <input type="email" placeholder="New Email">
                    <input type="password" placeholder="New Password">
                    <button class="action-btn">Update</button>
                </div>
            </div>
            <div>
                <h2>History</h2>
                <div id="order-history" style="margin-top:20px;"></div>
            </div>
        </div>
    </section>

    <div id="quick-view" class="overlay">
        <div class="view-panel">
            <i class="fas fa-times" style="position:absolute; top:25px; right:25px; cursor:pointer;" onclick="closeOverlays()"></i>
            <h2 id="view-title">Product Name</h2>
            <p id="view-desc" style="color:var(--text-dim); margin-top:15px; line-height:1.6;"></p>
            <div class="qty-controls">
                <button class="qty-btn" onclick="updateQty(-1)">-</button>
                <span id="view-qty" style="font-weight:900; font-size:1.2rem;">1</span>
                <button class="qty-btn" onclick="updateQty(1)">+</button>
            </div>
            <button class="action-btn" id="add-to-cart-final">ADD TO BAG - <span id="view-price"></span></button>
        </div>
    </div>

    <div id="payment-panel" class="overlay">
        <div class="view-panel">
            <i class="fas fa-times" style="position:absolute; top:25px; right:25px; cursor:pointer;" onclick="closeOverlays()"></i>
            <h2>PAYMENT GATEWAY</h2>
            <p style="color:var(--text-dim); font-size:0.8rem; margin-bottom:20px;">Prices updated via Live API</p>
            
            <select id="crypto-select" onchange="calcCryptoPrice()" style="width:100%; padding:15px; background:#000; color:white; border-radius:10px; border:1px solid var(--border); margin-bottom:20px;">
                <option value="btc">Bitcoin (BTC)</option>
                <option value="eth">Ethereum (ETH)</option>
                <option value="ltc">Litecoin (LTC)</option>
            </select>

            <div class="crypto-box">
                <p id="crypto-amount" style="font-size:1.5rem; font-weight:900;">Calculating...</p>
                <p class="address-text" id="wallet-addr">Select coin</p>
            </div>
            
            <button class="action-btn" onclick="confirmPurchase()">I HAVE SENT PAYMENT</button>
        </div>
    </div>

    <script>
        const WALLETS = {
            btc: '1NtpN3aPZowqEzX16E5cMUHQ16P9KHQtiy',
            eth: '0x8cBc2AD1dF8c0e42465a9E80c1B84FeB0dEE0D87',
            ltc: 'LhWYtDeDPfUtEpbJC2Pho7xQTXfEEXj6UY'
        };

        const PRODUCTS = [
            { id: 1, name: 'Spammed Pieces', price: 1.25, desc: '80% valid rate spammed pieces (good if u need leads)' },
            { id: 2, name: '20 Spammed Pieces', price: 15.00, desc: 'Premium bulk leads bundle. High valid rate guaranteed for larger operations.' }
        ];

        let cart = [];
        let viewingItem = null;
        let viewingQty = 1;
        let cryptoPrices = { btc: 0, eth: 0, ltc: 0 };

        // --- Init ---
        window.onload = () => {
            initBackground();
            fetchPrices();
            renderProducts();
            navigateTo('home');
            
            // Notification if cart not empty
            if(localStorage.getItem('rak_cart')) {
                cart = JSON.parse(localStorage.getItem('rak_cart'));
                updateCartUI();
            }
        };

        function initBackground() {
            const canvas = document.getElementById('bg-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = Array(40).fill().map(() => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 2,
                vx: Math.random() * 0.5 - 0.25,
                vy: Math.random() * 0.5 - 0.25
            }));
            function animate() {
                ctx.clearRect(0,0,canvas.width, canvas.height);
                particles.forEach(p => {
                    p.x += p.vx; p.y += p.vy;
                    if(p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if(p.y < 0 || p.y > canvas.height) p.vy *= -1;
                    ctx.fillStyle = '#ff0f0f';
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                    ctx.fill();
                });
                requestAnimationFrame(animate);
            }
            animate();
        }

        async function fetchPrices() {
            try {
                const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,litecoin&vs_currencies=usd');
                const data = await res.json();
                cryptoPrices.btc = data.bitcoin.usd;
                cryptoPrices.eth = data.ethereum.usd;
                cryptoPrices.ltc = data.litecoin.usd;
            } catch(e) { console.error("Price API Error"); }
        }

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = PRODUCTS.map(p => `
                <div class="item-card" onclick="openQuickView(${p.id})">
                    <div class="price-tag">$${p.price.toFixed(2)}</div>
                    <h3 style="margin:10px 0;">${p.name}</h3>
                    <p style="color:var(--text-dim); font-size:0.8rem;">Click to view details</p>
                </div>
            `).join('');
        }

        function navigateTo(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-tabs button').forEach(b => b.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            
            // Set tab active
            const btns = document.querySelectorAll('.nav-tabs button');
            if(pageId === 'home') btns[0].classList.add('active');
            if(pageId === 'logs') btns[1].classList.add('active');
            if(pageId === 'food') btns[2].classList.add('active');
            
            if(pageId === 'cart') renderCart();
            if(pageId === 'profile') renderHistory();
        }

        // --- Quick View Logic ---
        function openQuickView(id) {
            viewingItem = PRODUCTS.find(p => p.id === id);
            viewingQty = 1;
            document.getElementById('view-title').innerText = viewingItem.name;
            document.getElementById('view-desc').innerText = viewingItem.desc;
            document.getElementById('view-qty').innerText = '1';
            document.getElementById('view-price').innerText = '$' + viewingItem.price.toFixed(2);
            document.getElementById('quick-view').style.display = 'flex';
        }

        function updateQty(val) {
            viewingQty = Math.max(1, viewingQty + val);
            document.getElementById('view-qty').innerText = viewingQty;
            document.getElementById('view-price').innerText = '$' + (viewingItem.price * viewingQty).toFixed(2);
        }

        document.getElementById('add-to-cart-final').onclick = () => {
            const cartItem = { ...viewingItem, qty: viewingQty };
            cart.push(cartItem);
            localStorage.setItem('rak_cart', JSON.stringify(cart));
            updateCartUI();
            notify(`${viewingQty}x ${viewingItem.name} added to bag!`);
            closeOverlays();
        };

        function updateCartUI() {
            document.getElementById('cart-dot').style.display = cart.length > 0 ? 'block' : 'none';
        }

        function notify(msg) {
            const container = document.getElementById('notification-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `<i class="fas fa-check-circle" style="color:var(--primary)"></i> ${msg}`;
            container.appendChild(toast);
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        function closeOverlays() {
            document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none');
        }

        // --- Checkout Logic ---
        function renderCart() {
            const list = document.getElementById('cart-items');
            list.innerHTML = '';
            let total = 0;
            cart.forEach((item, i) => {
                total += (item.price * item.qty);
                list.innerHTML += `
                    <div style="background:var(--card); padding:20px; border-radius:15px; border:1px solid var(--border); margin-bottom:15px; display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <h4>${item.name}</h4>
                            <p style="color:var(--text-dim); font-size:0.8rem;">Quantity: ${item.qty}</p>
                        </div>
                        <div style="display:flex; gap:20px; align-items:center;">
                            <span style="font-weight:900;">$${(item.price * item.qty).toFixed(2)}</span>
                            <i class="fas fa-trash-alt" style="cursor:pointer; opacity:0.3;" onclick="removeFromCart(${i})"></i>
                        </div>
                    </div>
                `;
            });
            document.getElementById('total-usd').innerText = '$' + total.toFixed(2);
        }

        function removeFromCart(i) {
            cart.splice(i, 1);
            localStorage.setItem('rak_cart', JSON.stringify(cart));
            renderCart();
            updateCartUI();
        }

        function openPaymentPanel() {
            if(cart.length === 0) return notify("Cart is empty!");
            document.getElementById('payment-panel').style.display = 'flex';
            calcCryptoPrice();
        }

        function calcCryptoPrice() {
            const coin = document.getElementById('crypto-select').value;
            const totalUSD = cart.reduce((a, b) => a + (b.price * b.qty), 0);
            const priceInCoin = (totalUSD / cryptoPrices[coin]).toFixed(6);
            document.getElementById('crypto-amount').innerText = `${priceInCoin} ${coin.toUpperCase()}`;
            document.getElementById('wallet-addr').innerText = WALLETS[coin];
        }

        function confirmPurchase() {
            const id = 'RAK-' + Math.floor(Math.random() * 899999 + 100000);
            const history = JSON.parse(localStorage.getItem('rak_history')) || [];
            const order = { id, total: document.getElementById('total-usd').innerText, date: new Date().toLocaleDateString() };
            history.push(order);
            localStorage.setItem('rak_history', JSON.stringify(history));
            cart = [];
            localStorage.removeItem('rak_cart');
            updateCartUI();
            notify("Order Initiated: " + id);
            navigateTo('profile');
            closeOverlays();
        }

        // --- Profile ---
        function verifyProfile() {
            if(document.getElementById('p-key').value === 'rak.tf776') {
                document.getElementById('admin-gate-ui').style.display = 'none';
                document.getElementById('settings-ui').style.display = 'block';
            } else { notify("Access Denied."); }
        }

        function renderHistory() {
            const history = JSON.parse(localStorage.getItem('rak_history')) || [];
            const container = document.getElementById('order-history');
            if(history.length === 0) container.innerHTML = '<p style="color:var(--text-dim)">No orders found.</p>';
            else {
                container.innerHTML = history.reverse().map(o => `
                    <div style="background:#111; padding:15px; border-radius:12px; margin-bottom:10px; border-left:3px solid var(--primary); display:flex; justify-content:space-between;">
                        <span>${o.id}</span>
                        <span style="font-weight:bold;">${o.total}</span>
                    </div>
                `).join('');
            }
        }
    </script>
</body>
</html>
